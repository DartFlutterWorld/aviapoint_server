# üöÄ AviaPoint Server - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Dart/Flutter backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ö–æ—Å—Ç–∏–Ω–≥–∞.

## üìä –í—ã–±—Ä–∞–Ω –≤–∞—à –ø—Ä–æ–µ–∫—Ç:

```
‚úÖ Dart HTTP Server (Shelf Framework)
‚úÖ PostgreSQL Database
‚úÖ OpenAPI/Swagger UI
‚úÖ JWT Authentication
‚úÖ Docker & Docker Compose
‚úÖ Nginx Reverse Proxy
‚úÖ Production Ready
```

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —Ö–æ—Å—Ç–∏–Ω–≥–∞

### **–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤** ‚Üí Render.com (5 –º–∏–Ω—É—Ç) ‚≠ê
```bash
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ env.example –≤ .env
2. –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL —Å–µ—Ä–≤–∏—Å –Ω–∞ render.com
3. –°–æ–∑–¥–∞–π—Ç–µ Web Service –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. Deploy - –∏ –≥–æ—Ç–æ–≤–æ!
```
**–¶–µ–Ω–∞:** $7-25/–º–µ—Å | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê Easy

### **–î–ª—è —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è** ‚Üí DigitalOcean App Platform
```bash
1. –°–æ–∑–¥–∞–π—Ç–µ App Platform –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π deploy –ø—Ä–∏ push
```
**–¶–µ–Ω–∞:** $12-40/–º–µ—Å | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê Easy

### **–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è** ‚Üí VPS + Docker (30 –º–∏–Ω—É—Ç)
```bash
1. –°–æ–∑–¥–∞–π—Ç–µ VPS (Linode $5, Vultr $5, Hetzner $3)
2. ./install.sh production
3. nano .env
4. ./start.sh production
```
**–¶–µ–Ω–∞:** $5-20/–º–µ—Å | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê‚≠ê Hard

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|---------|
| `Dockerfile` | Docker –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `docker-compose.prod.yaml` | Production Docker Compose |
| `nginx.conf` | Nginx –∫–æ–Ω—Ñ–∏–≥ (SSL, rate limiting) |
| `env.example` | –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| `start.sh` | –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ |
| `DEPLOYMENT.md` | **–ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥** ‚≠ê –ß–ò–¢–ê–ô–¢–ï –ó–î–ï–°–¨ |
| `HOSTING_GUIDE.md` | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º |
| `ARCHITECTURE.md` | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã |
| `TROUBLESHOOTING.md` | –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º |

---

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç 1: Render.com (–°–ê–ú–´–ô –ü–†–û–°–¢–û–ô)

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git add .
git commit -m "Add deployment files"
git push origin main
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ **render.com**
2. –ù–∞–∂–º–∏—Ç–µ "New +" ‚Üí "PostgreSQL"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - Name: `aviapoint-db`
   - Database: `aviapoint`
   - Region: –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π

### –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ Web Service
1. –ù–∞–∂–º–∏—Ç–µ "New +" ‚Üí "Web Service"
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - Name: `aviapoint-server`
   - Build Command: `dart pub get`
   - Start Command: `dart lib/main.dart`

### –®–∞–≥ 4: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ Environment:
```
POSTGRESQL_HOST=[–∞–¥—Ä–µ—Å –∏–∑ –ë–î]
POSTGRESQL_USER=postgres
POSTGRESQL_PASSWORD=[–∏–∑ –ë–î]
POSTGRESQL_DB=aviapoint
```

### –®–∞–≥ 5: Deploy!
–ù–∞–∂–º–∏—Ç–µ "Create Web Service" ‚úÖ

**URL:** `https://aviapoint-server.onrender.com`

---

## üèóÔ∏è –í–∞—Ä–∏–∞–Ω—Ç 2: VPS + Docker

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ VPS
- Linode ($5/–º–µ—Å) - [linode.com](https://linode.com)
- Vultr ($5/–º–µ—Å) - [vultr.com](https://vultr.com)
- Hetzner ($3/–º–µ—Å) - [hetzner.com](https://hetzner.com)

–í—ã–±–µ—Ä–∏—Ç–µ: **Ubuntu 22.04 LTS**, **2GB RAM**, **50GB SSD**

### –®–∞–≥ 2: SSH –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
ssh root@YOUR_IP

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Compose
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
```

### –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
```bash
mkdir -p /app && cd /app
git clone https://github.com/yourusername/aviapoint_server.git
cd aviapoint_server
chmod +x start.sh
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ
```bash
cp env.example .env
nano .env  # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ!
```

### –®–∞–≥ 5: –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
apt install certbot -y
certbot certonly --standalone -d yourdomain.com

mkdir -p ssl
cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem ssl/cert.pem
cp /etc/letsencrypt/live/yourdomain.com/privkey.pem ssl/key.pem
```

### –®–∞–≥ 6: –ó–∞–ø—É—Å—Ç–∏—Ç–µ
```bash
./start.sh production

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker-compose -f docker-compose.prod.yaml ps
```

### –®–∞–≥ 7: Firewall
```bash
sudo ufw enable
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
```

**–ì–æ—Ç–æ–≤–æ!** –û—Ç–∫—Ä–æ–π—Ç–µ `https://yourdomain.com`

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–≤ –º–µ—Å—è—Ü)

### Minimal ($5-10)
```
VPS 2GB:              $5
= Total: $5/–º–µ—Å
```

### Recommended ($15-30)
```
Render Web:           $7
Render Database:      $8
= Total: $15/–º–µ—Å
```

### Enterprise ($100+)
```
AWS EC2 t3.medium:    $30
AWS RDS PostgreSQL:   $30
Bandwidth:            $20
= Total: $80+/–º–µ—Å
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ deploy

- [ ] –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ GitHub
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã: `dart pub get`
- [ ] –ù–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫: `dart analyze`
- [ ] `.env` —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≥–æ—Ç–æ–≤ (–µ—Å–ª–∏ VPS)
- [ ] –î–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ö–æ—Å—Ç
- [ ] Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ VPS)
- [ ] Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–æ–¥—É–º–∞–Ω–∞
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ

---

## üîß –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
https://yourdomain.com/openapi/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API
curl https://yourdomain.com/api/profiles

# –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yaml logs -f app
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
docker-compose -f docker-compose.prod.yaml ps

# –õ–æ–≥–∏
docker-compose -f docker-compose.prod.yaml logs -f

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
docker-compose -f docker-compose.prod.yaml restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.prod.yaml down

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
git pull origin main
docker-compose -f docker-compose.prod.yaml up -d --build
```

---

## üÜò –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç | `docker logs` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ |
| –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` |
| 502 Bad Gateway | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx: `docker restart nginx` |
| SSL –æ—à–∏–±–∫–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `certbot renew` |
| –ú–µ–¥–ª–µ–Ω–Ω–æ | –í–∫–ª—é—á–∏—Ç–µ Gzip –≤ nginx.conf (—É–∂–µ –≤–∫–ª—é—á–µ–Ω) |

üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** —Å–º–æ—Ç—Ä–∏—Ç–µ `TROUBLESHOOTING.md`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **DEPLOYMENT.md** - –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (30+ —Å—Ç—Ä–∞–Ω–∏—Ü)
- **HOSTING_GUIDE.md** - –ë—ã—Å—Ç—Ä—ã–π –ø—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
- **ARCHITECTURE.md** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ö–µ–º—ã
- **TROUBLESHOOTING.md** - –†–µ—à–µ–Ω–∏–µ 10 —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º

---

## üéì –û–±—É—á–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤—ã Docker
```bash
docker --help                    # –ü–æ–º–æ—â—å
docker ps                        # –¢–µ–∫—É—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker logs CONTAINER_ID         # –õ–æ–≥–∏
docker exec CONTAINER_ID bash    # –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```

### Docker Compose
```bash
docker-compose up -d             # –ó–∞–ø—É—Å–∫
docker-compose down              # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose logs -f           # –õ–æ–≥–∏
docker-compose restart           # –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
```

### Nginx
```bash
nginx -t                         # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
systemctl restart nginx          # –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
```

---

## üí° Pro Tips

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Cloudflare (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- –£–ª—É—á—à–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å CDN
- –î–æ–±–∞–≤–∏—Ç DDoS –∑–∞—â–∏—Ç—É
- –î–∞—Å—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π SSL (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)

### 2. –†–µ–≥—É–ª—è—Ä–Ω—ã–π backup
```bash
# Daily backup (–¥–æ–±–∞–≤—å—Ç–µ –≤ crontab)
0 2 * * * docker exec aviapoint-postgres pg_dump -U postgres aviapoint > /backups/db_$(date +\%Y\%m\%d).sql
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ)
- **UptimeRobot** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- **Sentry** - –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ
- **Cloudflare** - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –†–µ–≥—É–ª—è—Ä–Ω–æ: `dart pub upgrade`
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ: GitHub Dependabot
- –ò–∑—É—á–∞–π—Ç–µ: security advisories

---

## üö¢ Continuous Deployment

–°–æ–∑–¥–∞–Ω GitHub Actions workflow (`.github/workflows/deploy.yml`):
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã
2. –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑
3. –ü—É—à–∏—Ç –≤ registry
4. –î–µ–ø–ª–æ–π–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Secrets –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è.

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

1. **–ß–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:** `docker-compose logs`
3. **–ù–∞–π–¥–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ:** `TROUBLESHOOTING.md`
4. **–û—Ç–∫—Ä–æ–π—Ç–µ issue** –Ω–∞ GitHub —Å –ª–æ–≥–∞–º–∏

---

## üéâ –£—Å–ø–µ—à–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

```
‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ https://yourdomain.com
‚úÖ Swagger UI –Ω–∞ https://yourdomain.com/openapi/
‚úÖ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∞–∫—Ç–∏–≤–µ–Ω
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
```

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º!** üéä

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** January 2024  
**–ê–≤—Ç–æ—Ä:** DevOps Documentation
