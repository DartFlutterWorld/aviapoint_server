# üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–µ—Å–ª–∏ .env –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

–°–æ–≥–ª–∞—Å–Ω–æ `docker-compose.prod.yaml`, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

- **–õ–æ–≥–∏–Ω:** `postgres`
- **–ü–∞—Ä–æ–ª—å:** `password` (–¥–µ—Ñ–æ–ª—Ç–Ω—ã–π, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω –≤ .env)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `aviapoint`
- **–•–æ—Å—Ç:** `db` (–≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏) –∏–ª–∏ `localhost` (—Å–Ω–∞—Ä—É–∂–∏)

---

## –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –°–ø–æ—Å–æ–± 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /home/aviapoint_server
cat .env | grep POSTGRESQL
```

–ò–ª–∏:
```bash
grep POSTGRESQL .env
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
POSTGRESQL_USER=postgres
POSTGRESQL_PASSWORD=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_–ø–∞—Ä–æ–ª—å
POSTGRESQL_DB=aviapoint
```

---

### –°–ø–æ—Å–æ–± 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker exec aviapoint-postgres env | grep POSTGRES
```

–ò–ª–∏:
```bash
docker-compose -f docker-compose.prod.yaml exec db env | grep POSTGRES
```

---

### –°–ø–æ—Å–æ–± 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ docker inspect

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker inspect aviapoint-postgres | grep -A 10 "Env"
```

---

## –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ Adminer

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

- **–°–∏—Å—Ç–µ–º–∞:** `PostgreSQL`
- **–°–µ—Ä–≤–µ—Ä:** `db` (–µ—Å–ª–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Adminer) –∏–ª–∏ `aviapoint-postgres` (–µ—Å–ª–∏ –∏–∑–≤–Ω–µ)
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `postgres`
- **–ü–∞—Ä–æ–ª—å:** `password`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `aviapoint`

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ .env —Ñ–∞–π–ª:

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `.env` —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ psql

### –ò–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker exec -it aviapoint-postgres psql -U postgres -d aviapoint
```

### –°–Ω–∞—Ä—É–∂–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
psql -h localhost -U postgres -d aviapoint
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ
```

---

## –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ .env —Ñ–∞–π–ª

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /home/aviapoint_server
nano .env

# –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
POSTGRESQL_PASSWORD=–Ω–æ–≤—ã–π_–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ë–î
docker-compose -f docker-compose.prod.yaml restart db
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ psql

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
docker exec -it aviapoint-postgres psql -U postgres

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É
ALTER USER postgres WITH PASSWORD '–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å';

# –í—ã–π–¥–∏—Ç–µ
\q

# –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª
nano .env
# –ò–∑–º–µ–Ω–∏—Ç–µ POSTGRESQL_PASSWORD

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose -f docker-compose.prod.yaml restart db
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ß–µ—Ä–µ–∑ Adminer:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://83.166.246.205:8082`
2. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   - –°–∏—Å—Ç–µ–º–∞: `PostgreSQL`
   - –°–µ—Ä–≤–µ—Ä: `db`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `postgres`
   - –ü–∞—Ä–æ–ª—å: `password` (–∏–ª–∏ –∏–∑ .env)
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `aviapoint`
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"

### –ß–µ—Ä–µ–∑ psql:

```bash
docker exec -it aviapoint-postgres psql -U postgres -d aviapoint -c "SELECT version();"
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!
2. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ git** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` —Ñ–∞–π–ª (–¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`)
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –ë–î —Ç–æ–ª—å–∫–æ —Å –Ω—É–∂–Ω—ã—Ö IP
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** (–º–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã)

---

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd /home/aviapoint_server && \
echo "=== –ò–∑ .env —Ñ–∞–π–ª–∞ ===" && \
[ -f .env ] && grep POSTGRESQL .env || echo ".env —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è" && \
echo "" && \
echo "=== –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ===" && \
echo "POSTGRESQL_USER=postgres" && \
echo "POSTGRESQL_PASSWORD=password" && \
echo "POSTGRESQL_DB=aviapoint"
```

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ —É–∑–Ω–∞—Ç—å –∏ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL! üîê

