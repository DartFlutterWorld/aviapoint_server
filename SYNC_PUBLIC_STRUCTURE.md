# Синхронизация структуры папки public на продакшн

Этот скрипт синхронизирует структуру папки `public` с локальной разработки на продакшн, создавая только директории без копирования файлов.

## Использование

### Локально (с вашего Mac):

```bash
./sync_public_structure_to_prod.sh [server_ip]
```

По умолчанию используется IP: `83.166.246.205`

### На сервере (SSH на сервер):

```bash
cd /home/aviapoint_server
./sync_public_structure_to_prod.sh
```

## Что делает скрипт:

1. ✅ Анализирует структуру локальной папки `public`
2. ✅ Определяет, запущен ли скрипт локально или на сервере
3. ✅ Создает все необходимые директории на продакшн
4. ✅ Пропускает уже существующие директории
5. ✅ **НЕ копирует файлы** (только структура)

## Структура директорий, которая будет создана:

- `public/flights/` - фотографии полетов
- `public/airports/` - фотографии аэропортов
  - `public/airports/official/` - официальные фото аэропортов
  - `public/airports/visitor/` - фото посетителей аэропортов
- `public/profiles/` - аватары пользователей
- `public/ownership_documents/` - документы на право собственности
- `public/feedback/` - файлы обратной связи
- `public/news/` - новости (со всеми подпапками)
- `public/normal/` - нормальные состояния (со всеми подпапками)
- `public/preflight/` - префлайт проверки (со всеми подпапками)
- `public/stories/` - истории (со всеми подпапками)
- `public/video_for_students/` - видео для студентов

## Пример вывода:

```
═══════════════════════════════════════════════════════════
  Синхронизация структуры папки public на продакшн
═══════════════════════════════════════════════════════════

1. Проверка подключения к серверу...
✅ Подключение установлено

2. Анализ структуры локальной папки public...
✅ Найдено директорий: 45

3. Внимание!
   Будут созданы только директории (без файлов)
   Существующие директории будут пропущены

Продолжить? (y/n): y

4. Создание директорий на продакшн...
   ✓ airports
   ✓ airports/official
   ✓ airports/visitor
   ✓ flights
   ✓ profiles
   ...

═══════════════════════════════════════════════════════════
✅ Синхронизация завершена!
═══════════════════════════════════════════════════════════

Статистика:
   Создано директорий: 12
   Уже существовало: 33
   Всего обработано: 45
```

## Важно:

- ⚠️ Скрипт **НЕ удаляет** существующие директории на проде
- ⚠️ Скрипт **НЕ копирует** файлы из локалки на прод
- ⚠️ Скрипт только **создает недостающие** директории
- ✅ Безопасно запускать многократно

## Когда использовать:

Используйте этот скрипт, когда:
- Добавили новые подпапки в `public/`
- Изменили структуру директорий для хранения файлов
- Нужно убедиться, что все необходимые директории существуют на проде

## Связанные скрипты:

- `create_schema_migration.sh` - создание миграции структуры БД
- `apply_schema_migration_to_prod.sh` - применение миграции на прод


